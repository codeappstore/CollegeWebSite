@model College.Model.DataTransferObject.OtherDto.PageCarouselAcademicItemsModelDto
@{
    Layout = "~/Views/Shared/_BackendLayout.cshtml";
    ViewData["Title"] = "Home Page Elements -";
    int academic = 1;
    int carousel = 1;
}
@(await Html.PartialAsync("~/Views/Shared/_AlertLayout.cshtml"))
<div class="row">
    <div class="col-lg-6 col-md-6 col-sm-12">
        <div class="card">
            <div class="card-header">
                <h5>
                    Home Page
                    <a asp-controller="WebSite" asp-action="Index" class="btn btn-primary btn-sm text-light" style="float: right;">
                        <i class="fas fa-arrow-left"></i>  Back to website manager
                    </a>
                </h5>
            </div>
            <div class="card-body card-block">
                <form asp-controller="Page" asp-action="Home" method="post" enctype="multipart/form-data" asp-antiforgery="true">
                    <div class="form-group">
                        <div asp-validation-summary="ModelOnly" class="text-danger">
                            <span>Please correct the following errors</span>
                        </div>
                    </div>
                    <input type="hidden" asp-for="Page.PageId" />

                    <div class="row">

                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="form-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-laptop"></i>
                                    &nbsp;&nbsp;
                                    <label asp-for="Page.PageName"></label>
                                </div>
                                <input asp-for="Page.PageName" class="au-input au-input--full" type="text" required />
                                <span asp-validation-for="Page.PageName" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="form-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-comments"></i>
                                    &nbsp;&nbsp;
                                    <label asp-for="Page.Description"></label>
                                </div>
                                <textarea asp-for="Page.Description" placeholder="Description" class="au-input au-input--full textarea-init" required>@Model.Page.Description</textarea>
                                <span asp-validation-for="Page.Description" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <div class="form-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-photo"></i>
                                    &nbsp;&nbsp;
                                    <label asp-for="Page.ImageString"></label>
                                </div>
                                <input asp-for="Page.ImageString" type="file" class="dropify form-control-file" data-max-file-size="5M" data-allowed-file-extensions="jpg jpeg png">
                                <p for="ImageString">Image (5MB)</p>
                                <span asp-validation-for="Page.ImageString" class="text-danger"></span>
                            </div>
                            @if (Model.Page.BackgroundImage != null)
                            {
                                <div class="row">
                                    <div class="col-sm-12 d-flex justify-content-center ">
                                        <img asp-append-version="false" src="@Model.Page.BackgroundImage" alt="@Model.Page.BackgroundImage image not found" style="max-height: 200px; width: auto;" />
                                    </div>
                                    <div class="col-sm-12">
                                        <p class="text-center">Current Image</p>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>

                    <div class="form-actions form-group">
                        <button class="btn btn-success btn-sm" type="submit"><i class="fas fa-edit"></i> Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-6 col-md-6 col-sm-12">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <strong>Brochure </strong>
                    </div>
                    <div class="card-body card-block">
                        <form asp-controller="Page" asp-action="UpdateAttachment" method="post" enctype="multipart/form-data" asp-antiforgery="true">
                            <div class="form-group">
                                <div asp-validation-summary="ModelOnly" class="text-danger">
                                    <span>Please correct the following errors</span>
                                </div>
                            </div>
                            <input type="hidden" asp-for="Brochure.AttachmentId" />
                            <input type="hidden" asp-for="Brochure.PageId" />

                            <div class="col-sm-12 col-md-12 col-lg-12">
                                <div class="form-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-file"></i>
                                        &nbsp;&nbsp;
                                        <label asp-for="Brochure.FileName"></label>
                                    </div>
                                    <input asp-for="Brochure.FileName" class="au-input au-input--full" type="text" required />
                                    <span asp-validation-for="Brochure.FileName" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="col-sm-12 col-md-12 col-lg-12">
                                <div class="form-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-file"></i>
                                        &nbsp;&nbsp;
                                        <label asp-for="Brochure.FileString"></label>
                                    </div>
                                    <input asp-for="Brochure.FileString" type="file" class="dropify form-control-file" data-max-file-size="10M" data-allowed-file-extensions="pdf">
                                    <p for="File">Pdf (10MB)</p>
                                    <span asp-validation-for="Brochure.FileString" class="text-danger"></span>
                                </div>
                                @if (Model.Brochure != null)
                                {
                                    @if (Model.Brochure.Link != null)
                                    {
                                        <div class="row">
                                            <div class="col-sm-12 d-flex justify-content-center ">
                                                <button class="btn btn-danger"> <i class="fas fa-file"></i><a class="text-light" href="@(Model.Brochure.Link)" target="_blank">&nbsp;&nbsp;  @Model.Brochure.FileName</a></button>
                                            </div>
                                            <div class="col-sm-12">
                                                <p class="text-center">Current File</p>
                                            </div>
                                        </div>
                                    }
                                }
                            </div>

                            <div class="form-actions form-group">
                                <button class="btn btn-success btn-sm" type="submit"><i class="fas fa-edit"></i> Update</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <strong>Academic Details </strong>
                    </div>
                    <div class="card-body card-block">
                        <form asp-controller="Page" asp-action="AcademicDetails" method="post" enctype="multipart/form-data" asp-antiforgery="true">
                            <div class="form-group">
                                <div asp-validation-summary="ModelOnly" class="text-danger">
                                    <span>Please correct the following errors</span>
                                </div>
                            </div>
                            <input type="hidden" asp-for="Academic.AcademicId" />

                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12">
                                    <div class="form-group">
                                        <div class="input-group-addon">
                                            <i class="fa fa-comments"></i>
                                            &nbsp;&nbsp;
                                            <label asp-for="Academic.Description"></label>
                                        </div>
                                        <textarea asp-for="Academic.Description" rows="5" placeholder="Description" class="au-input au-input--full textarea-init" cols="40" required>@Model.Academic.Description</textarea>
                                        <span asp-validation-for="Academic.Description" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-actions form-group">
                                <button class="btn btn-success btn-sm" type="submit"><i class="fas fa-edit"></i> Update</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <strong>Academic Summary </strong>
                    </div>
                    <div class="card-body card-block">

                        @if (Model.AcademicItems.Count > 0)
                        {
                            foreach (var academicItem in Model.AcademicItems)
                            {
                                <ul class="list-group">
                                    <li class="list-group-item">
                                        <b>@(academic++).</b>&nbsp; @academicItem.Title
                                        <div class="card-text text-sm-center float-sm-right">
                                            <a asp-controller="Page" asp-action="AcademicItem" asp-route-id="@academicItem.ItemId"> <i class="fas fa-edit text-success"></i> Edit</a>
                                        </div>
                                    </li>
                                </ul>
                            }
                        }
                        else
                        {
                            <div class="text-center"><h4>Dat not found</h4></div>
                        }
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <strong>Carousel Item List </strong>
                        <a asp-controller="Page" asp-action="CarouselAdd" class="btn btn-primary btn-sm text-light" style="float: right;">
                            <i class="fas fa-plus"></i> Add
                        </a>
                    </div>
                    <div class="card-body card-block">

                        @if (Model.Carousel.Count > 0)
                        {
                            foreach (var carouselItems in Model.Carousel)
                            {
                                <ul class="list-group">
                                    <li class="list-group-item">
                                        <b>@(carousel++).</b>&nbsp; @carouselItems.Title
                                        <div class="card-text text-sm-center float-sm-right">
                                            <a asp-controller="Page" asp-action="CarouselUpdate" asp-route-id="@carouselItems.CarouselId"> <i class="fas fa-edit text-success"></i> Edit</a> |
                                            <a href="#" onclick="NotifyAndDelete(@carouselItems.CarouselId)"><i class="fas fa-trash" style="color: red;"></i> Delete</a>
                                        </div>
                                    </li>
                                </ul>
                            }
                        }
                        else
                        {
                            <div class="text-center"><h4>Dat not found</h4></div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        function NotifyAndDelete(id) {
            swal({
                title: "Are you sure?",
                text: "You want to delete this feature, You won't be able to revert this data!",
                icon: 'warning',
                closeOnEsc: false,
                closeOnClickOutside: false,
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        type: "POST",
                        url: "/Page/CarouselDelete",
                        dataType: "json",
                        headers: {
                            "RequestVerificationToken": $('input[name = __RequestVerificationToken]').val()
                        },
                        data: {
                            id: id
                        },
                        success: function (response) {
                            swal("Poof all gone! " + response, {
                                icon: "success",
                            }).then(function () {
                                window.location.href = "/Page/Home"
                            });
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        },
                        error: function (response) {
                            alert(response.responseText);
                        }
                    });
                }
            });
        }
    </script>
}